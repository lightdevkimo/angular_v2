<app-overlay>
  <ng-container class="content">
    <h1>Sign Up</h1>

  </ng-container>
</app-overlay>

<div class="site-section bg-light">
  <div class="container" style="margin-top: -30vh">
    <div class="row d-flex justify-content-center">
      <div class="col-*">
        <div  *ngIf="isLoading">
          <app-loading-spinner></app-loading-spinner>
        </div>
      </div>
    </div>
    <div class="row d-flex justify-content-around" >
      <div class="col-md-6 mb-5"  >

        <form  class="p-5 bg-white "
        #signupForm="ngForm"
        (ngSubmit)="signup(signupForm.value)"
        *ngIf="!isLoading"
        >
        <div class="alert alert-danger" *ngIf="error">
          {{error}}
        </div>
        <!-- first name and last name -->
          <div class="row form-group">
            <div class="col-md-6 mb-3 mb-md-0">
              <label class="text-black" for="name">First Name</label>
              <input type="text" id="name" class="form-control"
              ngModel name="name"
              required pattern="^[a-zA-Z_][a-zA-Z0-9_]*$"
              minlength="3"
              #name=ngModel
              [ngClass]="{'alert-danger' : name.invalid && name.touched}"
              />
              <div>
                <div class="text-danger small" *ngIf="name.errors?.required && name.touched">
                  - Your First Name is required.
                </div>
                <div class="text-danger small" *ngIf=" name.errors?.pattern && name.touched">
                  - Your First Name must start with letters or underscores only.
                </div>
                <div class="text-danger small" *ngIf="name.errors?.minlength && name.touched">
                  - Your First Name must be 3 characters at least.
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <label class="text-black" for="gender">Gender</label>
              <input type="text" id="gender" class="form-control"
              ngModel name="gender"
              required pattern="^[a-zA-Z_][a-zA-Z0-9_]*$"
              minlength="3"
              #gender=ngModel
              [ngClass]="{'alert-danger' : gender.invalid && gender.touched}"
              />
              <div>
                <div class="text-danger small" *ngIf="gender.errors?.required && gender.touched">
                  - Your Gender is required.
                </div>
                <div class="text-danger small" *ngIf=" gender.errors?.pattern && gender.touched">
                  - Your Gender must start with letters or underscores only.
                </div>
                <div class="text-danger small" *ngIf="gender.errors?.minlength && gender.touched">
                  - Your Gender must be 3 characters at least.
                </div>
              </div>
            </div>
          </div>
        <!-- email -->

          <div class="row form-group">
            <div class="col-md-12">
              <label class="text-black" for="email">Email</label>
              <input type="email" id="email" class="form-control"
              ngModel name="email"
              required email
              #email=ngModel
              [ngClass]="{'alert-danger' : email.invalid && email.touched}"
              />
              <div>
                <div class="text-danger small" *ngIf="email.errors?.required && email.touched">
                  - Your Email is required.
                </div>
                <div class="text-danger small" *ngIf=" email.errors?.email && email.touched">
                  - Your Email must be valid.
                </div>

              </div>
            </div>
          </div>
        <!-- password -->

          <div class="row form-group">
            <div class="col-md-12">
              <label class="text-black " for="password">Password</label>
              <input type="password" id="password" class="form-control"
              ngModel name="password" required minlength="8"
              #password='ngModel'
              [ngClass]="{'alert-danger' : password.invalid && password.touched}"
              />
              <div>
                <div class="text-danger small" *ngIf="password.errors?.required && password.touched">
                  - Your Password is required.
                </div>
                <div class="text-danger small" *ngIf=" password.errors?.minlength && password.touched">
                  - Your Password must be 8 at least.
                </div>

              </div>
            </div>
          </div>
        <!-- retype password -->
          <div class="row form-group ">
            <div class="col-md-12">
              <label class="text-black " for="password_confirmation">Re-type Password</label>
              <input type="password" id="password_confirmation" class="form-control"
              [ngClass]="{'alert-danger' : password_confirmation.invalid && password_confirmation.touched}"
              ngModel name="password_confirmation" required #password_confirmation='ngModel'
              [pattern]="password.value"
              />
              <div>
                <div class="text-danger small" *ngIf="password_confirmation.errors?.required && password_confirmation.touched">
                  - Your Password is required.
                </div>
                <div class="text-danger small" *ngIf=" password_confirmation.errors?.pattern && password_confirmation.touched">
                  - Two Passwords must be exact.
                </div>

              </div>
            </div>
          </div>
          <!-- submit -->
          <div class="row form-group align-items-center justify-content-between ">
            <div class="col-md-6">
              <input
                type="submit"
                value="Sign Up"
                class="btn btn-primary btn-lg text-white"
                [disabled]="!signupForm.valid"
                />
              </div>

            <div class="col-md-6 ">
              Do have an account?
              <a
                routerLink="/login"
                class=" link-secondary"
              > Log In</a>
            </div>


          </div>
        </form>
      </div>
    </div>
  </div>
</div>


